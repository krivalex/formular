<template>
  <section id="nothing">
    <div class="random-floating-image">
      <slot></slot>
      <img src="@/assets/background/aspects/Aer.webp">
      <img src="@/assets/background/aspects/Aqua.webp">
      <img src="@/assets/background/aspects/Ignis.webp">
      <img src="@/assets/background/aspects/Ordo.webp">
      <img src="@/assets/background/aspects/Perditio.webp">
      <img src="@/assets/background/aspects/Terra.webp">
      <img src="@/assets/background/aspects/Alienis.png">
      <img src="@/assets/background/aspects/Gelum.webp">
      <img src="@/assets/background/aspects/Arbor.png">
      <img src="@/assets/background/aspects/Auram.png">
      <img src="@/assets/background/aspects/Bestia.png">
      <img src="@/assets/background/aspects/Cognitio.png">
      <img src="@/assets/background/aspects/Corpus.png">
      <img src="@/assets/background/aspects/Exanimis.png">
      <img src="@/assets/background/aspects/Fabrico.png">
      <img src="@/assets/background/aspects/Fames.png">
      <img src="@/assets/background/aspects/Herba.png">
      <img src="@/assets/background/aspects/Humanus.png">
      <img src="@/assets/background/aspects/Instrumentum.png">
      <img src="@/assets/background/aspects/Iter.png">
      <img src="@/assets/background/aspects/Limus.png">
      <img src="@/assets/background/aspects/Lucrum.png">
      <img src="@/assets/background/aspects/Lux.png">
      <img src="@/assets/background/aspects/Machina.png">
      <img src="@/assets/background/aspects/Messis.png">
      <img src="@/assets/background/aspects/Metallum.png">
      <img src="@/assets/background/aspects/Meto.png">
      <img src="@/assets/background/aspects/Mortuus.png">
      <img src="@/assets/background/aspects/Motus.png">
      <img src="@/assets/background/aspects/Venenum.png">
      <img src="@/assets/background/aspects/Pannus.png">
      <img src="@/assets/background/aspects/Perfodio.png">
      <img src="@/assets/background/aspects/Permutatio.png">
      <img src="@/assets/background/aspects/Potentia.png">
      <img src="@/assets/background/aspects/Praecantatio.png">
      <img src="@/assets/background/aspects/Sano.png">
      <img src="@/assets/background/aspects/Sensus.png">
      <img src="@/assets/background/aspects/Spiritus.png">
      <img src="@/assets/background/aspects/Telum.png">
      <img src="@/assets/background/aspects/Tempestas.png">
      <img src="@/assets/background/aspects/Tenebrae.png">
      <img src="@/assets/background/aspects/Tutamen.png">
      <img src="@/assets/background/aspects/Unknown.png">
      <img src="@/assets/background/aspects/Vacous.png">
      <img src="@/assets/background/aspects/Victus.png">
      <img src="@/assets/background/aspects/Vinculum.png">
      <img src="@/assets/background/aspects/Vitium.png">
      <img src="@/assets/background/aspects/Vitreus.png">
      <img src="@/assets/background/aspects/Volatus.png">
      <img src="@/assets/background/aspects/Aer.webp">
      <img src="@/assets/background/aspects/Aqua.webp">
      <img src="@/assets/background/aspects/Ignis.webp">
      <img src="@/assets/background/aspects/Ordo.webp">
      <img src="@/assets/background/aspects/Perditio.webp">
      <img src="@/assets/background/aspects/Terra.webp">
      <img src="@/assets/background/aspects/Alienis.png">
      <img src="@/assets/background/aspects/Gelum.webp">
      <img src="@/assets/background/aspects/Arbor.png">
      <img src="@/assets/background/aspects/Auram.png">
      <img src="@/assets/background/aspects/Bestia.png">
      <img src="@/assets/background/aspects/Cognitio.png">
      <img src="@/assets/background/aspects/Corpus.png">
      <img src="@/assets/background/aspects/Exanimis.png">
      <img src="@/assets/background/aspects/Fabrico.png">
      <img src="@/assets/background/aspects/Fames.png">
      <img src="@/assets/background/aspects/Herba.png">
      <img src="@/assets/background/aspects/Humanus.png">
      <img src="@/assets/background/aspects/Instrumentum.png">
      <img src="@/assets/background/aspects/Iter.png">
      <img src="@/assets/background/aspects/Limus.png">
      <img src="@/assets/background/aspects/Lucrum.png">
      <img src="@/assets/background/aspects/Lux.png">
      <img src="@/assets/background/aspects/Machina.png">
      <img src="@/assets/background/aspects/Messis.png">
      <img src="@/assets/background/aspects/Metallum.png">
      <img src="@/assets/background/aspects/Meto.png">
      <img src="@/assets/background/aspects/Mortuus.png">
      <img src="@/assets/background/aspects/Motus.png">
      <img src="@/assets/background/aspects/Venenum.png">
      <img src="@/assets/background/aspects/Pannus.png">
      <img src="@/assets/background/aspects/Perfodio.png">
      <img src="@/assets/background/aspects/Permutatio.png">
      <img src="@/assets/background/aspects/Potentia.png">
      <img src="@/assets/background/aspects/Praecantatio.png">
      <img src="@/assets/background/aspects/Sano.png">
      <img src="@/assets/background/aspects/Sensus.png">
      <img src="@/assets/background/aspects/Spiritus.png">
      <img src="@/assets/background/aspects/Telum.png">
      <img src="@/assets/background/aspects/Tempestas.png">
      <img src="@/assets/background/aspects/Tenebrae.png">
      <img src="@/assets/background/aspects/Tutamen.png">
      <img src="@/assets/background/aspects/Unknown.png">
      <img src="@/assets/background/aspects/Vacous.png">
      <img src="@/assets/background/aspects/Victus.png">
      <img src="@/assets/background/aspects/Vinculum.png">
      <img src="@/assets/background/aspects/Vitium.png">
      <img src="@/assets/background/aspects/Vitreus.png">
      <img src="@/assets/background/aspects/Volatus.png">
    </div>
  </section>
</template>

<script>

export default {
  name: "not-found-page",
  mounted() {

    const container = document.querySelector('.random-floating-image');
    const images = container.querySelectorAll('img');

    images.forEach((image) => {
      let randomX = Math.random() * window.innerWidth;
      let randomY = Math.random() * window.innerHeight * 5;

      if (randomY > window.innerHeight - 100) {
        randomY -= 50;
      }
      else if (randomY < 100) {
        randomY += 50;
      }

      if (randomX > window.innerWidth - 100) {
        randomX -= 50;
      }
      else if (randomX < 100) {
        randomX += 50;
      }

      image.style.left = `${randomX}px`;
      image.style.top = `${randomY}px`;
      image.style.animation = `${this.generateRandomKeyframeAnimation()} ${Math.random() * 5 + 120}s infinite`;
      image.style.zIndex = `1`;

      image.classList.add('floating-animation');

      // Добавляем обработчики событий для перемещения
      image.addEventListener('mousedown', this.startDrag);
      image.addEventListener('mousemove', this.drag);
      image.addEventListener('mouseup', this.endDrag);
      image.addEventListener('dblclick', this.doubleClick);
    });
  },
  methods: {
    generateRandomKeyframeAnimation() {
      const animationName = `random-animation-${Math.floor(Math.random() * 1000)}`;
      const rotation = Math.floor(Math.random() * 360);
      const keyframes = `@keyframes ${animationName} {
    0% {
      transform:
       rotate(0deg) 
       translate(0px, 0px);
    }
    50% {
      transform: 
       rotate(${rotation}deg)
       translate(${Math.floor(Math.random() * 150)}px, ${Math.floor(Math.random() * 150)}px);
    }
    100% {
      transform:
       rotate(${rotation}deg)
       translate(0px, 0px);
    }
  }`;

      const styleSheet = document.createElement('style');
      styleSheet.innerHTML = keyframes;
      document.head.appendChild(styleSheet);

      return animationName;
    },
    startDrag(event) {
      // Начало перемещения
      event.preventDefault();
      this.draggableElement = event.target;
      this.initialX = event.clientX - this.draggableElement.offsetLeft;
      this.initialY = event.clientY - this.draggableElement.offsetTop;

      this.draggableElement.style.animationPlayState = 'paused';
    },
    drag(event) {
      // Перемещение в процессе
      if (this.draggableElement) {
        event.preventDefault();
        const newX = event.clientX - this.initialX;
        const newY = event.clientY - this.initialY;
        this.draggableElement.style.left = `${newX}px`;
        this.draggableElement.style.top = `${newY}px`;
      }
    },
    endDrag() {
      this.draggableElement.style.animationPlayState = 'running';
      this.draggableElement = null;
    },
    doubleClick(event) {
      // Плавное движение при двойном клике
      const image = event.target;
      const currentX = parseFloat(image.style.left);
      const currentY = parseFloat(image.style.top);

      const randomX = Math.random() < 0.5 ? currentX + 50 : currentX - 50;
      const randomY = Math.random() < 0.5 ? currentY + 50 : currentY - 50;

      image.style.transition = 'left 4s, top 4s'; // Добавляем переходы для свойств left и top
      image.style.left = `${randomX}px`;
      image.style.top = `${randomY}px`;

      // Сброс переходов после задержки
      setTimeout(() => {
        image.style.transition = '';
      }, 4000); // Задержка в течение 0.5 секунды для завершения плавного движения
    }
  },
  data() {
    return {
      draggableElement: null,
      initialX: null,
      initialY: null
    }
  }
}
</script>

<style lang="scss" scoped>
#nothing {
  height: calc(100vh);
  max-width: 100vw;
  overflow-x: hidden;
}

.random-floating-image {
  position: relative;

  img {
    width: 30px;
    height: 30px;
    position: absolute;
    z-index: 10;
    cursor: pointer;

    &:hover {
      transform: scale(1.2);
    }
  }
}
</style>
